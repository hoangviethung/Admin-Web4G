{"version":3,"sources":["dropZone.js"],"names":["previewNode","document","querySelector","previewTemplate","innerHTML","parentNode","removeChild","myDropzone","Dropzone","url","parallelUploads","uploadMultiple","previewsContainer","clickable","on","res","xhr","formData","append","files","response","listNewImages","Array","from","querySelectorAll","listImageDefault","getElementById","forEach","item","index","name","value","setAttribute","concat","addEventListener","urlInput","previousSibling","select","focus","setSelectionRange","execCommand","classList","remove","btnCopy","deleteImage","e","param","$","ajax","data","type","beforeSend","attr","success","Code","parents","console","log","Message","complete","removeAttr","btn"],"mappings":"AAAA,aAAA,IAAIA,YAAcC,SAASC,cAAc,qBACrCC,gBAAkBH,YAAYI,UAClCJ,YAAYK,WAAWC,YAAYN,aAEnC,IAAIO,WAAa,IAAIC,SAAS,eAAgB,CAC7CC,IAAK,mCAELN,gBAAiBA,gBACjBO,gBAAiB,IACjBC,gBAAgB,EAChBC,kBAAmB,mCACnBC,UAAW,uCAGZN,WAAWO,GAAG,mBAAmB,SAASC,EAAKC,EAAKC,GACnDA,EAASC,OAAO,SAAU,qBAG3BX,WAAWO,GAAG,mBAAmB,SAASK,EAAOC,GAChD,IAAIC,EAAgBC,MAAMC,KAAKtB,SAASuB,iBAAiB,mCACrDC,EAAmBxB,SAASyB,eAAe,cAC/CL,EAAcM,SAAQ,SAASC,EAAMC,GACpCD,EAAK1B,cAAc,SAASE,UAAYgB,EAASS,GAAOC,KACxDF,EAAK1B,cAAc,QAAQ6B,MAAQX,EAASS,GAAOpB,IACnDmB,EAAK1B,cAAc,eAAe8B,aAAa,UAA/C,qBAAAC,OAA+Eb,EAASS,GAAOpB,IAA/F,OACAmB,EAAK1B,cAAc,iBAAiBgC,iBAAiB,SAAS,WAC7D,IAAIC,EAAWP,EAAK1B,cAAc,iBAAiBkC,gBACnDD,EAASE,SACTF,EAASG,QACTH,EAASI,kBAAkB,EAAG,OAC9BtC,SAASuC,YAAY,WAEtBZ,EAAKa,UAAUC,OAAO,gBAAiB,mBAAoB,aAAc,eACzEjB,EAAiBP,OAAOU,SAI1B,IAAIe,QAAUrB,MAAMC,KAAKtB,SAASuB,iBAAiB,6BAWnD,SAASoB,YAAYC,EAAGC,GACvBC,EAAEC,KAAK,CACNvC,IAAK,oCACLwC,KAAM,CACLxC,IAAKqC,GAENI,KAAM,OACNC,WAAY,WACXJ,EAAEF,GAAGO,KAAK,WAAY,aAEvBC,QAAS,SAASjC,GACK,MAAlBA,EAASkC,KACZP,EAAEF,GAAGU,QAAQ,cAAcb,SAE3Bc,QAAQC,IAAIrC,EAASsC,UAGvBC,SAAU,WACTZ,EAAEF,GAAGe,WAAW,eA5BnBjB,QAAQhB,SAAQ,SAASkC,GACxBA,EAAI3B,iBAAiB,SAAS,WAC7B,IAAIC,EAAW0B,EAAIzB,gBACnBD,EAASE,SACTF,EAASG,QACTH,EAASI,kBAAkB,EAAG,OAC9BtC,SAASuC,YAAY","file":"dropZone.min.js","sourcesContent":["var previewNode = document.querySelector(\"#template-preview\");\r\nvar previewTemplate = previewNode.innerHTML;\r\npreviewNode.parentNode.removeChild(previewNode);\r\n\r\nvar myDropzone = new Dropzone(\".upload-file\", { // Make the whole body a dropzone\r\n\turl: \"http://192.168.1.106/file-upload\", // Set the url\r\n\t// uploadMultiple: true,\r\n\tpreviewTemplate: previewTemplate,\r\n\tparallelUploads: 100,\r\n\tuploadMultiple: true,\r\n\tpreviewsContainer: \".upload-file #list-image-preview\",\r\n\tclickable: \".upload-file .upload-image-wrapper\"\r\n});\r\n\r\nmyDropzone.on('sendingmultiple', function(res, xhr, formData) {\r\n\tformData.append('folder', '/Upload/Banner');\r\n})\r\n\r\nmyDropzone.on('successmultiple', function(files, response) {\r\n\tvar listNewImages = Array.from(document.querySelectorAll('#list-image-preview .file-item'));\r\n\tvar listImageDefault = document.getElementById('list-image');\r\n\tlistNewImages.forEach(function(item, index) {\r\n\t\titem.querySelector('.name').innerHTML = response[index].name;\r\n\t\titem.querySelector('.url').value = response[index].url;\r\n\t\titem.querySelector('.btn-delete').setAttribute('onclick', `deleteImage(this,'${response[index].url}')`);\r\n\t\titem.querySelector('.btn-copy-url').addEventListener('click', function() {\r\n\t\t\tvar urlInput = item.querySelector('.btn-copy-url').previousSibling;\r\n\t\t\turlInput.select();\r\n\t\t\turlInput.focus();\r\n\t\t\turlInput.setSelectionRange(0, 99999);\r\n\t\t\tdocument.execCommand(\"copy\");\r\n\t\t})\r\n\t\titem.classList.remove('dz-processing', 'dz-image-preview', 'dz-success', 'dz-complete')\r\n\t\tlistImageDefault.append(item);\r\n\t})\r\n})\r\n\r\nvar btnCopy = Array.from(document.querySelectorAll('.file-item .btn-copy-url'));\r\nbtnCopy.forEach(function(btn) {\r\n\tbtn.addEventListener('click', function() {\r\n\t\tvar urlInput = btn.previousSibling;\r\n\t\turlInput.select();\r\n\t\turlInput.focus();\r\n\t\turlInput.setSelectionRange(0, 99999);\r\n\t\tdocument.execCommand(\"copy\");\r\n\t})\r\n})\r\n\r\nfunction deleteImage(e, param) {\r\n\t$.ajax({\r\n\t\turl: 'http://192.168.1.106/delete-image',\r\n\t\tdata: {\r\n\t\t\turl: param\r\n\t\t},\r\n\t\ttype: 'post',\r\n\t\tbeforeSend: function() {\r\n\t\t\t$(e).attr('disabled', 'disabled')\r\n\t\t},\r\n\t\tsuccess: function(response) {\r\n\t\t\tif (response.Code === 200) {\r\n\t\t\t\t$(e).parents('.file-item').remove();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(response.Message)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomplete: function() {\r\n\t\t\t$(e).removeAttr('disabled')\r\n\t\t}\r\n\t})\r\n}"]}