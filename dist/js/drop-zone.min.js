"use strict";var previewNode=document.querySelector("#template-preview"),previewTemplate=previewNode.innerHTML;previewNode.parentNode.removeChild(previewNode);var dataFolder=$("#dataFolder").attr("data-folder");console.log(dataFolder);var myDropzone=new Dropzone(".upload-file",{url:"http://192.168.1.106/file-upload",previewTemplate:previewTemplate,parallelUploads:100,uploadMultiple:!0,previewsContainer:".upload-file #list-image-preview",clickable:".upload-file .upload-image-wrapper"});myDropzone.on("sendingmultiple",(function(e,t,o){o.append("folder",dataFolder)})),myDropzone.on("successmultiple",(function(e,t){var o=Array.from(document.querySelectorAll("#list-image-preview .file-item")),r=document.getElementById("list-image");o.forEach((function(e,o){e.querySelector(".name").innerHTML=t[o].name,e.querySelector(".url").value=t[o].url,e.querySelector(".btn-delete").setAttribute("onclick","deleteImage(this,'".concat(t[o].url,"')")),e.querySelector(".btn-copy-url").addEventListener("click",(function(){var t=e.querySelector(".btn-copy-url").previousSibling;t.select(),t.focus(),t.setSelectionRange(0,99999),document.execCommand("copy")})),e.classList.remove("dz-processing","dz-image-preview","dz-success","dz-complete"),r.append(e)}))}));var btnCopy=Array.from(document.querySelectorAll(".file-item .btn-copy-url"));function deleteImage(e,t){$.ajax({url:"http://192.168.1.106/delete-image",data:{url:t},type:"post",beforeSend:function(){$(e).attr("disabled","disabled")},success:function(t){200===t.Code?$(e).parents(".file-item").remove():console.log(t.Message)},complete:function(){$(e).removeAttr("disabled")}})}btnCopy.forEach((function(e){e.addEventListener("click",(function(){var t=e.previousSibling;t.select(),t.focus(),t.setSelectionRange(0,99999),document.execCommand("copy")}))}));var template=document.querySelector("#template");if(template){var templateNew=template.parentNode.innerHTML;o.parentNode.removeChild(template);var itemDropZone=new Dropzone(".upload-file",{url:"/upload",thumbnailWidth:80,thumbnailHeight:80,parallelUploads:20,previewTemplate:templateNew,autoQueue:!1,previewsContainer:"#previews",clickable:".fileinput-button"});i.on("addedfile",(function(e){e.previewElement.querySelector(".start").onclick=function(){itemDropZone.enqueueFile(e)}})),itemDropZone.on("totaluploadprogress",(function(e){document.querySelector("#total-progress .progress-bar").style.width=e+"%"})),itemDropZone.on("sending",(function(e){document.querySelector("#total-progress").style.opacity="1",e.previewElement.querySelector(".start").setAttribute("disabled","disabled")})),itemDropZone.on("queuecomplete",(function(e){document.querySelector("#total-progress").style.opacity="0"})),document.querySelector("#actions .start").onclick=function(){itemDropZone.enqueueFiles(i.getFilesWithStatus(Dropzone.ADDED))},document.querySelector("#actions .cancel").onclick=function(){itemDropZone.removeAllFiles(!0)}}
//# sourceMappingURL=drop-zone.min.js.map
