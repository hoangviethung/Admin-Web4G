{"version":3,"sources":["drop-zone.js"],"names":["previewNode","document","querySelector","previewTemplate","innerHTML","parentNode","removeChild","myDropzone","Dropzone","url","parallelUploads","uploadMultiple","previewsContainer","clickable","on","res","xhr","formData","append","files","response","listNewImages","Array","from","querySelectorAll","listImageDefault","getElementById","forEach","item","index","name","value","setAttribute","concat","addEventListener","urlInput","previousSibling","select","focus","setSelectionRange","execCommand","classList","remove","btnCopy","deleteImage","e","param","$","ajax","data","type","beforeSend","attr","success","Code","parents","console","log","Message","complete","removeAttr","uploadFile","template","templateNew","o","itemDropZone","thumbnailWidth","thumbnailHeight","autoQueue","i","previewElement","onclick","enqueueFile","style","width","opacity","enqueueFiles","getFilesWithStatus","ADDED","removeAllFiles","btn"],"mappings":"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","file":"drop-zone.min.js","sourcesContent":["var previewNode = document.querySelector(\"#template-preview\");\r\nvar previewTemplate = previewNode.innerHTML;\r\npreviewNode.parentNode.removeChild(previewNode);\r\n\r\nvar myDropzone = new Dropzone(\".upload-file\", { // Make the whole body a dropzone\r\n\turl: \"http://192.168.1.106/file-upload\", // Set the url\r\n\t// uploadMultiple: true,\r\n\tpreviewTemplate: previewTemplate,\r\n\tparallelUploads: 100,\r\n\tuploadMultiple: true,\r\n\tpreviewsContainer: \".upload-file #list-image-preview\",\r\n\tclickable: \".upload-file .upload-image-wrapper\"\r\n});\r\n\r\nmyDropzone.on('sendingmultiple', function(res, xhr, formData) {\r\n\tformData.append('folder', '/Upload/Banner');\r\n})\r\n\r\nmyDropzone.on('successmultiple', function(files, response) {\r\n\tvar listNewImages = Array.from(document.querySelectorAll('#list-image-preview .file-item'));\r\n\tvar listImageDefault = document.getElementById('list-image');\r\n\tlistNewImages.forEach(function(item, index) {\r\n\t\titem.querySelector('.name').innerHTML = response[index].name;\r\n\t\titem.querySelector('.url').value = response[index].url;\r\n\t\titem.querySelector('.btn-delete').setAttribute('onclick', `deleteImage(this,'${response[index].url}')`);\r\n\t\titem.querySelector('.btn-copy-url').addEventListener('click', function() {\r\n\t\t\tvar urlInput = item.querySelector('.btn-copy-url').previousSibling;\r\n\t\t\turlInput.select();\r\n\t\t\turlInput.focus();\r\n\t\t\turlInput.setSelectionRange(0, 99999);\r\n\t\t\tdocument.execCommand(\"copy\");\r\n\t\t})\r\n\t\titem.classList.remove('dz-processing', 'dz-image-preview', 'dz-success', 'dz-complete')\r\n\t\tlistImageDefault.append(item);\r\n\t})\r\n})\r\n\r\nvar btnCopy = Array.from(document.querySelectorAll('.file-item .btn-copy-url'));\r\nbtnCopy.forEach(function(btn) {\r\n\tbtn.addEventListener('click', function() {\r\n\t\tvar urlInput = btn.previousSibling;\r\n\t\turlInput.select();\r\n\t\turlInput.focus();\r\n\t\turlInput.setSelectionRange(0, 99999);\r\n\t\tdocument.execCommand(\"copy\");\r\n\t})\r\n})\r\n\r\nfunction deleteImage(e, param) {\r\n\t$.ajax({\r\n\t\turl: 'http://192.168.1.106/delete-image',\r\n\t\tdata: {\r\n\t\t\turl: param\r\n\t\t},\r\n\t\ttype: 'post',\r\n\t\tbeforeSend: function() {\r\n\t\t\t$(e).attr('disabled', 'disabled')\r\n\t\t},\r\n\t\tsuccess: function(response) {\r\n\t\t\tif (response.Code === 200) {\r\n\t\t\t\t$(e).parents('.file-item').remove();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(response.Message)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomplete: function() {\r\n\t\t\t$(e).removeAttr('disabled')\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// UPLOAD FILE\r\nfunction uploadFile() {\r\n\tvar template = document.querySelector(\"#template\");\r\n\tif (template) {\r\n\t\tvar templateNew = template.parentNode.innerHTML;\r\n\t\to.parentNode.removeChild(template);\r\n\t\tvar itemDropZone = new Dropzone(\".upload-file\", {\r\n\t\t\turl: \"/upload\",\r\n\t\t\tthumbnailWidth: 80,\r\n\t\t\tthumbnailHeight: 80,\r\n\t\t\tparallelUploads: 20,\r\n\t\t\tpreviewTemplate: templateNew,\r\n\t\t\tautoQueue: !1,\r\n\t\t\tpreviewsContainer: \"#previews\",\r\n\t\t\tclickable: \".fileinput-button\"\r\n\t\t});\r\n\t\ti.on(\"addedfile\", (function(e) {\r\n\t\t\te.previewElement.querySelector(\".start\").onclick = function() {\r\n\t\t\t\titemDropZone.enqueueFile(e)\r\n\t\t\t}\r\n\t\t})), itemDropZone.on(\"totaluploadprogress\", (function(e) {\r\n\t\t\tdocument.querySelector(\"#total-progress .progress-bar\").style.width = e + \"%\"\r\n\t\t})), itemDropZone.on(\"sending\", (function(e) {\r\n\t\t\tdocument.querySelector(\"#total-progress\").style.opacity = \"1\", e.previewElement.querySelector(\".start\").setAttribute(\"disabled\", \"disabled\")\r\n\t\t})), itemDropZone.on(\"queuecomplete\", (function(e) {\r\n\t\t\tdocument.querySelector(\"#total-progress\").style.opacity = \"0\"\r\n\t\t})), document.querySelector(\"#actions .start\").onclick = function() {\r\n\t\t\titemDropZone.enqueueFiles(i.getFilesWithStatus(Dropzone.ADDED))\r\n\t\t}, document.querySelector(\"#actions .cancel\").onclick = function() {\r\n\t\t\titemDropZone.removeAllFiles(!0)\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// CHẠY KHI DOCUMENT SẴN SÀNG\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\tuploadFile();\r\n})"]}