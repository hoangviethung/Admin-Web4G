{"version":3,"sources":["drop-zone.js"],"names":["previewNode","document","querySelector","previewTemplate","innerHTML","parentNode","removeChild","dataFolder","$","attr","myDropzone","Dropzone","url","parallelUploads","uploadMultiple","previewsContainer","clickable","on","res","xhr","formData","append","files","response","listNewImages","Array","from","querySelectorAll","listImageDefault","getElementById","forEach","item","index","name","value","setAttribute","concat","addEventListener","urlInput","previousSibling","select","focus","setSelectionRange","execCommand","classList","remove","btnCopy","deleteImage","e","param","ajax","data","type","beforeSend","success","Code","parents","console","log","Message","complete","removeAttr","btn","template","templateNew","o","itemDropZone","thumbnailWidth","thumbnailHeight","autoQueue","i","previewElement","onclick","enqueueFile","style","width","opacity","enqueueFiles","getFilesWithStatus","ADDED","removeAllFiles"],"mappings":"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","file":"drop-zone.min.js","sourcesContent":["var previewNode = document.querySelector(\"#template-preview\");\r\nvar previewTemplate = previewNode.innerHTML;\r\npreviewNode.parentNode.removeChild(previewNode);\r\nvar dataFolder = $('#dataFolder').attr('data-folder');\r\n\r\nvar myDropzone = new Dropzone(\".upload-file\", { // Make the whole body a dropzone\r\n\turl: '/file-upload', // Set the url\r\n\t// uploadMultiple: true,\r\n\tpreviewTemplate: previewTemplate,\r\n\tparallelUploads: 100,\r\n\tuploadMultiple: true,\r\n\tpreviewsContainer: \".upload-file #list-image-preview\",\r\n\tclickable: \".upload-file .upload-image-wrapper\"\r\n});\r\n\r\nmyDropzone.on('sendingmultiple', function(res, xhr, formData) {\r\n\tformData.append('folder', dataFolder);\r\n})\r\n\r\nmyDropzone.on('successmultiple', function(files, response) {\r\n\tvar listNewImages = Array.from(document.querySelectorAll('#list-image-preview .file-item'));\r\n\tvar listImageDefault = document.getElementById('list-image');\r\n\tlistNewImages.forEach(function(item, index) {\r\n\t\titem.querySelector('.name').innerHTML = response[index].name;\r\n\t\titem.querySelector('.url').value = response[index].url;\r\n\t\titem.querySelector('.btn-delete').setAttribute('onclick', `deleteImage(this,'${response[index].url}')`);\r\n\t\titem.querySelector('.btn-copy-url').addEventListener('click', function() {\r\n\t\t\tvar urlInput = item.querySelector('.btn-copy-url').previousSibling;\r\n\t\t\turlInput.select();\r\n\t\t\turlInput.focus();\r\n\t\t\turlInput.setSelectionRange(0, 99999);\r\n\t\t\tdocument.execCommand(\"copy\");\r\n\t\t})\r\n\t\titem.classList.remove('dz-processing', 'dz-image-preview', 'dz-success', 'dz-complete')\r\n\t\tlistImageDefault.append(item);\r\n\t})\r\n})\r\n\r\nvar btnCopy = Array.from(document.querySelectorAll('.file-item .btn-copy-url'));\r\nbtnCopy.forEach(function(btn) {\r\n\tbtn.addEventListener('click', function() {\r\n\t\tvar urlInput = btn.previousSibling;\r\n\t\turlInput.select();\r\n\t\turlInput.focus();\r\n\t\turlInput.setSelectionRange(0, 99999);\r\n\t\tdocument.execCommand(\"copy\");\r\n\t})\r\n})\r\n\r\nfunction deleteImage(e, param) {\r\n\t$.ajax({\r\n\t\turl: '/delete-image',\r\n\t\tdata: {\r\n\t\t\turl: param\r\n\t\t},\r\n\t\ttype: 'post',\r\n\t\tbeforeSend: function() {\r\n\t\t\t$(e).attr('disabled', 'disabled')\r\n\t\t},\r\n\t\tsuccess: function(response) {\r\n\t\t\tif (response.Code === 200) {\r\n\t\t\t\t$(e).parents('.file-item').remove();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(response.Message)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomplete: function() {\r\n\t\t\t$(e).removeAttr('disabled')\r\n\t\t}\r\n\t})\r\n}\r\n\r\n// UPLOAD FILE\r\nvar template = document.querySelector(\"#template\");\r\nif (template) {\r\n\tvar templateNew = template.parentNode.innerHTML;\r\n\to.parentNode.removeChild(template);\r\n\tvar itemDropZone = new Dropzone(\".upload-file\", {\r\n\t\turl: '/file-upload',\r\n\t\tthumbnailWidth: 80,\r\n\t\tthumbnailHeight: 80,\r\n\t\tparallelUploads: 20,\r\n\t\tpreviewTemplate: templateNew,\r\n\t\tautoQueue: !1,\r\n\t\tpreviewsContainer: \"#previews\",\r\n\t\tclickable: \".fileinput-button\"\r\n\t});\r\n\ti.on(\"addedfile\", (function(e) {\r\n\t\te.previewElement.querySelector(\".start\").onclick = function() {\r\n\t\t\titemDropZone.enqueueFile(e)\r\n\t\t}\r\n\t})), itemDropZone.on(\"totaluploadprogress\", (function(e) {\r\n\t\tdocument.querySelector(\"#total-progress .progress-bar\").style.width = e + \"%\"\r\n\t})), itemDropZone.on(\"sending\", (function(e) {\r\n\t\tdocument.querySelector(\"#total-progress\").style.opacity = \"1\", e.previewElement.querySelector(\".start\").setAttribute(\"disabled\", \"disabled\")\r\n\t})), itemDropZone.on(\"queuecomplete\", (function(e) {\r\n\t\tdocument.querySelector(\"#total-progress\").style.opacity = \"0\"\r\n\t})), document.querySelector(\"#actions .start\").onclick = function() {\r\n\t\titemDropZone.enqueueFiles(i.getFilesWithStatus(Dropzone.ADDED))\r\n\t}, document.querySelector(\"#actions .cancel\").onclick = function() {\r\n\t\titemDropZone.removeAllFiles(!0)\r\n\t}\r\n}"]}